<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MalakOutlet - جميع المنتجات</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/alpinejs/3.13.0/cdn.min.js" defer></script>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
    }

    @media (max-width: 768px) {
      .mobile-menu {
        transform: translateX(100%);
        transition: transform 0.3s ease-in-out;
      }

      .mobile-menu.open {
        transform: translateX(0);
      }
    }

    .filter-sidebar {
      transform: translateX(100%);
      transition: transform 0.3s ease-in-out;
    }

    .filter-sidebar.open {
      transform: translateX(0);
    }

    .product-card {
      transition: all 0.3s ease;
    }

    .product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .price-range-slider {
      -webkit-appearance: none;
      appearance: none;
      height: 6px;
      border-radius: 3px;
      background: #e5e7eb;
      outline: none;
      opacity: 0.7;
      transition: opacity 0.2s;
    }

    .price-range-slider:hover {
      opacity: 1;
    }

    .price-range-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #f97316;
      cursor: pointer;
    }

    .price-range-slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #f97316;
      cursor: pointer;
      border: none;
    }

    .loading-skeleton {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: .5;
      }
    }

    .line-clamp-1 {
      display: -webkit-box;
      -webkit-line-clamp: 1;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>

<body class="text-gray-700 bg-gray-50 m-0 p-0" x-data="productsApp()">
  <!-- Header -->
  <header class="bg-orange-500 text-white px-4 md:px-10 py-4 sticky top-0 z-50">
    <div class="flex justify-between items-center container mx-auto">
      <!-- Left side with logo and search bar together -->
      <div class="flex items-center flex-1 space-x-4">
        <!-- Logo -->
        <img src="malak.png" alt="MalakOutlet Logo" class="w-16 md:w-20 lg:w-20 ml-6" />

        <!-- Search Bar - Hidden on mobile, visible on larger screens -->
        <div class="hidden md:flex flex-1 max-w-md mr-6">
          <div class="flex w-full bg-white rounded-full overflow-hidden">
            <input type="text" placeholder="عما تبحث؟" x-model="searchQuery" @input="filterProducts"
              class="flex-grow px-4 py-2 border-none text-right text-gray-700 outline-none" />
            <button class="px-4 bg-white text-orange-500 border-none font-bold">🔍</button>
          </div>
        </div>
      </div>

      <!-- Right Icons -->
      <div class="flex items-center">
        <!-- Mobile Menu Button -->
        <button @click="mobileMenuOpen = !mobileMenuOpen" class="md:hidden mr-4 text-white text-2xl">
          ☰
        </button>

        <!-- Icons -->
        <div class="flex items-center">
          <button class="relative mr-2 lg:mr-4">
            <svg class="w-6 h-6 md:w-7 md:h-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12 20.25C12 20.25 2.25 15 2.25 8.8125C2.25 7.46984 2.78337 6.18217 3.73277 5.23277C4.68217 4.28337 5.96984 3.75 7.3125 3.75C9.43031 3.75 11.2444 4.90406 12 6.75C12.7556 4.90406 14.5697 3.75 16.6875 3.75C18.0302 3.75 19.3178 4.28337 20.2672 5.23277C21.2166 6.18217 21.75 7.46984 21.75 8.8125C21.75 15 12 20.25 12 20.25Z"
                stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <span x-show="favoriteCount > 0" x-text="favoriteCount" class="absolute -top-2 -right-2 bg-red-500 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center"></span>
          </button>
          <button class="relative mr-2 lg:mr-4">
            <svg class="w-6 h-6 md:w-7 md:h-7" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M7.5 21.75C8.32843 21.75 9 21.0784 9 20.25C9 19.4216 8.32843 18.75 7.5 18.75C6.67157 18.75 6 19.4216 6 20.25C6 21.0784 6.67157 21.75 7.5 21.75Z"
                fill="currentColor"></path>
              <path
                d="M17.25 21.75C18.0784 21.75 18.75 21.0784 18.75 20.25C18.75 19.4216 18.0784 18.75 17.25 18.75C16.4216 18.75 15.75 19.4216 15.75 20.25C15.75 21.0784 16.4216 21.75 17.25 21.75Z"
                fill="currentColor"></path>
              <path
                d="M3.96469 6.75H21L18.3262 15.4416C18.2318 15.7482 18.0415 16.0165 17.7833 16.207C17.5252 16.3975 17.2127 16.5002 16.8919 16.5H7.88156C7.55556 16.5001 7.23839 16.3941 6.97806 16.1978C6.71772 16.0016 6.5284 15.7259 6.43875 15.4125L3.04781 3.54375C3.00301 3.38711 2.90842 3.24932 2.77835 3.15122C2.64828 3.05311 2.4898 3.00003 2.32687 3H0.75"
                stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
            </svg>
            <span x-show="cartCount > 0" x-text="cartCount" class="absolute -top-2 -right-2 bg-orange-600 text-white rounded-full text-xs w-5 h-5 flex items-center justify-center"></span>
          </button>
          <a href="#" class="hidden md:block text-sm lg:text-base text-white no-underline mr-2 lg:mr-4">
            تسجيل دخول / تسجيل
          </a>
        </div>
      </div>
    </div>

    <!-- Mobile Search - Visible only on mobile -->
    <div class="w-full order-4 mt-3 md:hidden">
      <div class="flex w-full bg-white rounded-full overflow-hidden">
        <input type="text" placeholder="عما تبحث؟" x-model="searchQuery" @input="filterProducts"
          class="flex-grow px-4 py-2 border-none text-right text-gray-700 outline-none" />
        <button class="px-4 bg-white text-orange-500 border-none font-bold">🔍</button>
      </div>
    </div>
  </header>

  <!-- Desktop Navigation -->
  <nav class="bg-orange-500 text-white px-4 md:px-10 pb-3 hidden md:block">
    <div class="flex justify-between items-center container mx-auto flex-wrap">
      <button @click="showFilters = !showFilters"
        class="bg-white text-orange-500 border-none py-2 px-4 rounded flex items-center font-bold text-sm lg:text-base">
        <span class="ml-2">≡</span> فلترة المنتجات
      </button>

      <ul class="flex list-none m-0 p-0 flex-wrap">
        <li class="mr-3 lg:mr-6 relative font-bold">
          <a href="index.html" class="text-white no-underline text-sm lg:text-base flex items-center hover:text-yellow-300">الرئيسية</a>
        </li>
        <li class="mr-3 lg:mr-6 relative font-bold">
          <a href="#" class="text-white no-underline text-sm lg:text-base flex items-center hover:text-yellow-300">العروض</a>
        </li>
        <li class="mr-3 lg:mr-6 relative font-bold">
          <a href="#" class="text-white no-underline text-sm lg:text-base flex items-center hover:text-yellow-300">مكعبات البناء</a>
        </li>
        <li class="mr-3 lg:mr-6 relative font-bold">
          <a href="#" class="text-white no-underline text-sm lg:text-base flex items-center hover:text-yellow-300">مجموعات ليغو</a>
        </li>
        <li class="mr-3 lg:mr-6 relative font-bold">
          <a href="#" class="text-white no-underline text-sm lg:text-base flex items-center hover:text-yellow-300">الألعاب</a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div x-show="mobileMenuOpen" @click="mobileMenuOpen = false"
    class="fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden" x-transition:enter="transition ease-out duration-300"
    x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
    x-transition:leave="transition ease-in duration-300" x-transition:leave-start="opacity-100"
    x-transition:leave-end="opacity-0"></div>

  <!-- Mobile Side Menu -->
  <div
    class="fixed top-0 right-0 w-3/4 h-full bg-white shadow-2xl z-50 transform transition-transform duration-300 mobile-menu md:hidden"
    :class="{'open': mobileMenuOpen}" x-show="mobileMenuOpen">
    <div class="p-4 border-b border-gray-200">
      <div class="flex justify-between items-center">
        <h2 class="text-lg font-bold text-orange-500">القائمة</h2>
        <button @click="mobileMenuOpen = false" class="text-gray-500 hover:text-gray-700">
          ✕
        </button>
      </div>
    </div>
    <div class="py-4">
      <ul class="list-none m-0 p-0">
        <li class="border-b border-gray-100">
          <a href="index.html" class="block py-3 px-4 text-gray-700 hover:bg-orange-50">الرئيسية</a>
        </li>
        <li class="border-b border-gray-100">
          <a href="#" class="block py-3 px-4 text-gray-700 hover:bg-orange-50">الألعاب</a>
        </li>
        <li class="border-b border-gray-100">
          <a href="#" class="block py-3 px-4 text-gray-700 hover:bg-orange-50">مجموعات ليغو</a>
        </li>
        <li class="border-b border-gray-100">
          <a href="#" class="block py-3 px-4 text-gray-700 hover:bg-orange-50">مكعبات البناء</a>
        </li>
        <li class="border-b border-gray-100">
          <a href="#" class="block py-3 px-4 text-gray-700 hover:bg-orange-50">العروض</a>
        </li>
        <li class="border-b border-gray-100">
          <a href="#" class="block py-3 px-4 text-gray-700 hover:bg-orange-50">عن الشركة</a>
        </li>
        <li class="border-b border-gray-100">
          <a href="#" class="block py-3 px-4 text-gray-700 hover:bg-orange-50">تسجيل دخول / تسجيل</a>
        </li>
      </ul>
    </div>
  </div>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-6" style="max-width: 1400px;">
    <!-- Breadcrumb -->
    <nav class="mb-6">
      <ol class="flex items-center space-x-2 space-x-reverse text-sm text-gray-500">
        <li><a href="index.html" class="hover:text-orange-500">الرئيسية</a></li>
        <li class="mr-2">←</li>
        <li class="text-orange-500 font-medium mr-2">جميع المنتجات</li>
      </ol>
    </nav>

    <!-- Page Header -->
    <div class="mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-2">جميع المنتجات</h1>
      <p class="text-gray-600">اكتشف مجموعتنا الكاملة من الألعاب التعليمية والترفيهية</p>
    </div>

    <div class="flex gap-6">
      <!-- Desktop Filters Sidebar -->
      <aside class="hidden lg:block w-80 bg-white rounded-lg shadow-sm p-6 h-fit sticky top-24" x-show="showFilters">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-lg font-bold text-gray-800">الفلاتر</h2>
          <button @click="resetFilters()" class="text-sm text-orange-500 hover:text-orange-600">إعادة تعيين</button>
        </div>

        <!-- Categories Filter -->
        <div class="mb-6">
          <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">الفئات</h3>
          <div class="space-y-2">
            <template x-for="category in categories" :key="category">
              <label class="flex items-center">
                <input type="checkbox" :value="category" x-model="selectedCategories" @change="filterProducts" class="ml-2 text-orange-500 focus:ring-orange-500">
                <span class="text-sm text-gray-600" x-text="category"></span>
              </label>
            </template>
          </div>
        </div>

        <!-- Age Range Filter -->
        <div class="mb-6">
          <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">الفئة العمرية</h3>
          <div class="space-y-2">
            <template x-for="age in ageRanges" :key="age">
              <label class="flex items-center">
                <input type="checkbox" :value="age" x-model="selectedAgeRanges" @change="filterProducts" class="ml-2 text-orange-500 focus:ring-orange-500">
                <span class="text-sm text-gray-600" x-text="age"></span>
              </label>
            </template>
          </div>
        </div>

        <!-- Price Range Filter -->
        <div class="mb-6">
          <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">نطاق السعر</h3>
          <div class="px-2">
            <div class="mb-4">
              <input type="range" min="0" max="100" x-model="priceRange.max" @input="filterProducts" 
                class="w-full price-range-slider bg-orange-200">
              <div class="flex justify-between text-sm text-gray-500 mt-2">
                <span>0 د.أ</span>
                <span x-text="priceRange.max + ' د.أ'"></span>
              </div>
            </div>
          </div>
        </div>

        <!-- Brand Filter -->
        <div class="mb-6">
          <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">العلامة التجارية</h3>
          <div class="space-y-2">
            <template x-for="brand in brands" :key="brand">
              <label class="flex items-center">
                <input type="checkbox" :value="brand" x-model="selectedBrands" @change="filterProducts" class="ml-2 text-orange-500 focus:ring-orange-500">
                <span class="text-sm text-gray-600" x-text="brand"></span>
              </label>
            </template>
          </div>
        </div>

        <!-- Rating Filter -->
        <div class="mb-6">
          <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">التقييم</h3>
          <div class="space-y-2">
            <template x-for="rating in [5,4,3,2,1]" :key="rating">
              <label class="flex items-center">
                <input type="checkbox" :value="rating" x-model="selectedRatings" @change="filterProducts" class="ml-2 text-orange-500 focus:ring-orange-500">
                <div class="flex items-center mr-2">
                  <template x-for="i in 5" :key="i">
                    <span :class="i <= rating ? 'text-yellow-400' : 'text-gray-300'" class="text-sm">★</span>
                  </template>
                  <span class="text-sm text-gray-600 mr-1">وأكثر</span>
                </div>
              </label>
            </template>
          </div>
        </div>
      </aside>

      <!-- Mobile Filter Button -->
      <button @click="mobileFiltersOpen = true" 
        class="lg:hidden fixed bottom-4 right-4 bg-orange-500 text-white rounded-full p-4 shadow-lg z-40"
        style="z-index:60">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
        </svg>
      </button>

      <!-- Mobile Filters Sidebar -->
      <div 
        x-show="mobileFiltersOpen" 
        @click="mobileFiltersOpen = false" 
        class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0"
        x-transition:enter-end="opacity-100"
        x-transition:leave="transition ease-in duration-200"
        x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0"
      ></div>
      <div 
        class="lg:hidden fixed top-0 right-0 w-80 max-w-full h-full bg-white shadow-2xl z-50 filter-sidebar"
        :class="{'open': mobileFiltersOpen}"
        x-show="mobileFiltersOpen"
        x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="translate-x-full"
        x-transition:enter-end="translate-x-0"
        x-transition:leave="transition ease-in duration-300"
        x-transition:leave-start="translate-x-0"
        x-transition:leave-end="translate-x-full"
        style="z-index:60"
      >
        <div class="p-4 border-b border-gray-200">
          <div class="flex justify-between items-center">
            <h2 class="text-lg font-bold text-orange-500">الفلاتر</h2>
            <button @click="mobileFiltersOpen = false" class="text-gray-500 hover:text-gray-700">✕</button>
          </div>
        </div>
        <div class="p-4 overflow-y-auto h-full pb-20">
          <!-- Same filters as desktop but for mobile -->
          <div class="mb-6">
            <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">الفئات</h3>
            <div class="space-y-2">
              <template x-for="category in categories" :key="category">
                <label class="flex items-center">
                  <input type="checkbox" :value="category" x-model="selectedCategories" @change="filterProducts" class="ml-2 text-orange-500 focus:ring-orange-500">
                  <span class="text-sm text-gray-600" x-text="category"></span>
                </label>
              </template>
            </div>
          </div>
          
          <div class="mb-6">
            <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">الفئة العمرية</h3>
            <div class="space-y-2">
              <template x-for="age in ageRanges" :key="age">
                <label class="flex items-center">
                  <input type="checkbox" :value="age" x-model="selectedAgeRanges" @change="filterProducts" class="ml-2 text-orange-500 focus:ring-orange-500">
                  <span class="text-sm text-gray-600" x-text="age"></span>
                </label>
              </template>
            </div>
          </div>

          <div class="mb-6">
            <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">نطاق السعر</h3>
            <div class="px-2">
              <div class="mb-4">
                <input type="range" min="0" max="100" x-model="priceRange.max" @input="filterProducts" 
                  class="w-full price-range-slider bg-orange-200">
                <div class="flex justify-between text-sm text-gray-500 mt-2">
                  <span>0 د.أ</span>
                  <span x-text="priceRange.max + ' د.أ'"></span>
                </div>
              </div>
            </div>
          </div>

          <div class="mb-6">
            <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">العلامة التجارية</h3>
            <div class="space-y-2">
              <template x-for="brand in brands" :key="brand">
                <label class="flex items-center">
                  <input type="checkbox" :value="brand" x-model="selectedBrands" @change="filterProducts" class="ml-2 text-orange-500 focus:ring-orange-500">
                  <span class="text-sm text-gray-600" x-text="brand"></span>
                </label>
              </template>
            </div>
          </div>

          <div class="mb-6">
            <h3 class="font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200">التقييم</h3>
            <div class="space-y-2">
              <template x-for="rating in [5,4,3,2,1]" :key="rating">
                <label class="flex items-center">
                  <input type="checkbox" :value="rating" x-model="selectedRatings" @change="filterProducts" class="ml-2 text-orange-500 focus:ring-orange-500">
                  <div class="flex items-center mr-2">
                    <template x-for="i in 5" :key="i">
                      <span :class="i <= rating ? 'text-yellow-400' : 'text-gray-300'" class="text-sm">★</span>
                    </template>
                    <span class="text-sm text-gray-600 mr-1">وأكثر</span>
                  </div>
                </label>
              </template>
            </div>
          </div>
        </div>
      </div>

      <!-- Products Section -->
      <div class="flex-1">
        <!-- Toolbar -->
        <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
          <div class="flex flex-col md:flex-row md:justify-between md:items-center gap-4">
            <div class="flex items-center gap-4">
              <span class="text-sm text-gray-600">
                عرض <span x-text="filteredProducts.length"></span> من <span x-text="allProducts.length"></span> منتج
              </span>
              
              <!-- View Toggle -->
              <div class="flex bg-gray-100 rounded-lg p-1">
                <button @click="viewMode = 'grid'" :class="viewMode === 'grid' ? 'bg-white shadow-sm' : ''" 
                  class="px-3 py-1 rounded text-sm transition-all">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path>
                  </svg>
                </button>
                <button @click="viewMode = 'list'" :class="viewMode === 'list' ? 'bg-white shadow-sm' : ''" 
                  class="px-3 py-1 rounded text-sm transition-all">
                  <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Sort Options -->
            <div class="flex items-center gap-2">
              <label class="text-sm text-gray-600">ترتيب حسب:</label>
              <select x-model="sortBy" @change="sortProducts" class="border border-gray-300 rounded-lg px-3 py-1 text-sm focus:ring-2 focus:ring-orange-500 focus:border-orange-500">
                <option value="newest">الأحدث</option>
                <option value="price-low">السعر من الأقل للأعلى</option>
                <option value="price-high">السعر من الأعلى للأقل</option>
                <option value="name">الاسم أ-ي</option>
                <option value="rating">الأعلى تقييماً</option>
                <option value="popular">الأكثر شعبية</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Loading State -->
        <div x-show="loading" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6">
          <template x-for="i in 8" :key="i">
            <div class="bg-white rounded-lg shadow-sm overflow-hidden">
              <div class="h-48 bg-gray-200 loading-skeleton"></div>
              <div class="p-4">
                <div class="h-4 bg-gray-200 rounded loading-skeleton mb-2"></div>
                <div class="h-3 bg-gray-200 rounded loading-skeleton mb-4 w-3/4"></div>
                <div class="h-4 bg-gray-200 rounded loading-skeleton w-1/2"></div>
              </div>
            </div>
          </template>
        </div>

        <!-- Products Grid -->
        <div x-show="!loading && viewMode === 'grid'" class="grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4 mb-8">
          <template x-for="product in paginatedProducts" :key="product.id">
            <div class="bg-white rounded-lg shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden product-card group">
              <div class="relative h-48 md:h-56 overflow-hidden">
                <!-- Make image clickable -->
                <a :href="'detiles.html?id=' + product.id">
                  <img :src="product.image" :alt="product.name" class="w-full h-full object-contain p-2 cursor-pointer" />
                </a>
                <!-- Badges -->
                <div class="absolute top-2 right-2 flex flex-col gap-1">
                  <span x-show="product.isNew" class="bg-green-500 text-white text-xs rounded-full py-1 px-2">جديد</span>
                  <span x-show="product.discount > 0" class="bg-red-500 text-white text-xs rounded-full py-1 px-2" x-text="`خصم ${product.discount}%`"></span>
                  <span x-show="product.isPopular" class="bg-blue-500 text-white text-xs rounded-full py-1 px-2">الأكثر مبيعاً</span>
                </div>
                <!-- Favorite Button -->
                <button @click="toggleFavorite(product.id)" class="absolute top-2 left-2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-md hover:shadow-lg transition-all">
                  <svg class="w-4 h-4" :class="product.isFavorite ? 'text-red-500 fill-current' : 'text-gray-400'" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                  </svg>
                </button>
                <!-- Quick View Button -->
                <button @click="quickView(product)" class="absolute bottom-2 left-1/2 transform -translate-x-1/2 bg-orange-500 text-white text-xs px-3 py-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-orange-600">
                  نظرة سريعة
                </button>
              </div>
              <div class="p-3 md:p-4">
                <!-- Make name clickable -->
                <a :href="'detiles.html?id=' + product.id">
                  <h3 class="text-sm md:text-base font-semibold mb-1 line-clamp-2 h-10 cursor-pointer" x-text="product.name"></h3>
                </a>
                <!-- Make category clickable -->
                <a :href="'detiles.html?id=' + product.id">
                  <p class="text-gray-500 text-xs md:text-sm mb-2 line-clamp-1 cursor-pointer" x-text="product.category"></p>
                </a>
                <!-- Rating -->
                <div class="flex items-center mb-2">
                  <div class="flex items-center">
                    <template x-for="i in 5" :key="i">
                      <span :class="i <= product.rating ? 'text-yellow-400' : 'text-gray-300'" class="text-sm">★</span>
                    </template>
                  </div>
                  <span class="text-xs text-gray-500 mr-1" x-text="`(${product.reviews})`"></span>
                </div>
                <!-- Price -->
                <div class="flex items-center justify-between mb-3">
                  <div class="flex items-center gap-2">
                    <span class="text-lg font-bold text-orange-500" x-text="product.price + ' د.أ'"></span>
                    <span x-show="product.originalPrice" class="text-sm text-gray-400 line-through" x-text="product.originalPrice + ' د.أ'"></span>
                  </div>
                </div>
                <!-- Add to Cart Button -->
                <button @click="addToCart(product)" class="w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium">
                  إضافة للسلة
                </button>
              </div>
            </div>
          </template>
        </div>

        <!-- Products List View -->
        <div x-show="!loading && viewMode === 'list'" class="space-y-4 mb-8">
          <template x-for="product in paginatedProducts" :key="product.id">
            <div class="bg-white rounded-lg shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden product-card">
              <div class="flex flex-col md:flex-row">
                <div class="relative md:w-48 h-48 md:h-auto overflow-hidden">
                  <!-- Make image clickable -->
                  <a :href="'detiles.html?id=' + product.id">
                    <img :src="product.image" :alt="product.name" class="w-full h-full object-contain p-2 cursor-pointer" />
                  </a>
                  <!-- Badges -->
                  <div class="absolute top-2 right-2 flex flex-col gap-1">
                    <span x-show="product.isNew" class="bg-green-500 text-white text-xs rounded-full py-1 px-2">جديد</span>
                    <span x-show="product.discount > 0" class="bg-red-500 text-white text-xs rounded-full py-1 px-2" x-text="`خصم ${product.discount}%`"></span>
                    <span x-show="product.isPopular" class="bg-blue-500 text-white text-xs rounded-full py-1 px-2">الأكثر مبيعاً</span>
                  </div>
                  <!-- Favorite Button -->
                  <button @click="toggleFavorite(product.id)" class="absolute top-2 left-2 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-md hover:shadow-lg transition-all">
                    <svg class="w-4 h-4" :class="product.isFavorite ? 'text-red-500 fill-current' : 'text-gray-400'" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                    </svg>
                  </button>
                </div>
                <div class="flex-1 p-4 md:p-6">
                  <div class="flex flex-col md:flex-row md:justify-between">
                    <div class="flex-1">
                      <!-- Make name clickable -->
                      <a :href="'detiles.html?id=' + product.id">
                        <h3 class="text-lg font-semibold mb-2 cursor-pointer" x-text="product.name"></h3>
                      </a>
                      <!-- Make category clickable -->
                      <a :href="'detiles.html?id=' + product.id">
                        <p class="text-gray-500 text-sm mb-3 cursor-pointer" x-text="product.category"></p>
                      </a>
                      <p class="text-gray-600 text-sm mb-3 line-clamp-2" x-text="product.description"></p>
                      
                      <!-- Rating -->
                      <div class="flex items-center mb-4">
                        <div class="flex items-center">
                          <template x-for="i in 5" :key="i">
                            <span :class="i <= product.rating ? 'text-yellow-400' : 'text-gray-300'" class="text-sm">★</span>
                          </template>
                        </div>
                        <span class="text-sm text-gray-500 mr-2" x-text="`(${product.reviews} تقييم)`"></span>
                      </div>
                    </div>

                    <div class="md:text-left flex flex-col justify-between">
                      <!-- Price -->
                      <div class="mb-4">
                        <div class="flex items-center gap-2 md:justify-end">
                          <span class="text-xl font-bold text-orange-500" x-text="product.price + ' د.أ'"></span>
                          <span x-show="product.originalPrice" class="text-sm text-gray-400 line-through" x-text="product.originalPrice + ' د.أ'"></span>
                        </div>
                      </div>

                      <!-- Actions -->
                      <div class="flex gap-2">
                        <button @click="quickView(product)" class="px-4 py-2 border border-orange-500 text-orange-500 rounded-lg hover:bg-orange-50 transition-colors text-sm">
                          نظرة سريعة
                        </button>
                        <button @click="addToCart(product)" class="px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-sm font-medium">
                          إضافة للسلة
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </template>
        </div>

        <!-- No Results -->
        <div x-show="!loading && filteredProducts.length === 0" class="text-center py-12">
          <svg class="mx-auto h-24 w-24 text-gray-300 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.291-1.007-5.824-2.562M15 7a3 3 0 11-6 0 3 3 0 016 0z"></path>
          </svg>
          <h3 class="text-lg font-medium text-gray-900 mb-2">لم يتم العثور على منتجات</h3>
          <p class="text-gray-500 mb-4">جرب تغيير معايير البحث أو الفلاتر</p>
          <button @click="resetFilters()" class="bg-orange-500 text-white px-6 py-2 rounded-lg hover:bg-orange-600 transition-colors">
            إعادة تعيين الفلاتر
          </button>
        </div>

        <!-- Pagination -->
        <div x-show="!loading && filteredProducts.length > 0 && totalPages > 1" class="flex justify-center items-center space-x-2 space-x-reverse mt-8">
          <button @click="changePage(currentPage - 1)" :disabled="currentPage === 1" 
            class="px-3 py-2 rounded-lg border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50">
            السابق
          </button>
          
          <template x-for="page in visiblePages" :key="page">
            <button @click="changePage(page)" 
              :class="page === currentPage ? 'bg-orange-500 text-white' : 'hover:bg-gray-50'"
              class="px-3 py-2 rounded-lg border" x-text="page">
            </button>
          </template>
          
          <button @click="changePage(currentPage + 1)" :disabled="currentPage === totalPages" 
            class="px-3 py-2 rounded-lg border disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50">
            التالي
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- Quick View Modal -->
  <div x-show="showQuickView" @click="showQuickView = false" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
    <div @click.stop class="bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
      <div class="flex justify-between items-center p-6 border-b">
        <h2 class="text-xl font-bold">نظرة سريعة</h2>
        <button @click="showQuickView = false" class="text-gray-500 hover:text-gray-700">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <div x-show="selectedProduct" class="p-6">
        <div class="grid md:grid-cols-2 gap-6">
          <div class="aspect-square bg-gray-100 rounded-lg overflow-hidden">
            <img :src="selectedProduct?.image" :alt="selectedProduct?.name" class="w-full h-full object-contain p-4" />
          </div>
          
          <div>
            <h3 class="text-2xl font-bold mb-2" x-text="selectedProduct?.name"></h3>
            <p class="text-gray-500 mb-4" x-text="selectedProduct?.category"></p>
            
            <!-- Rating -->
            <div class="flex items-center mb-4">
              <div class="flex items-center">
                <template x-for="i in 5" :key="i">
                  <span :class="i <= (selectedProduct?.rating || 0) ? 'text-yellow-400' : 'text-gray-300'" class="text-lg">★</span>
                </template>
              </div>
              <span class="text-sm text-gray-500 mr-2" x-text="`(${selectedProduct?.reviews || 0} تقييم)`"></span>
            </div>

            <!-- Price -->
            <div class="flex items-center gap-3 mb-6">
              <span class="text-3xl font-bold text-orange-500" x-text="(selectedProduct?.price || 0) + ' د.أ'"></span>
              <span x-show="selectedProduct?.originalPrice" class="text-lg text-gray-400 line-through" x-text="(selectedProduct?.originalPrice || 0) + ' د.أ'"></span>
            </div>

            <!-- Description -->
            <p class="text-gray-600 mb-6" x-text="selectedProduct?.description"></p>

            <!-- Features -->
            <div class="mb-6">
              <h4 class="font-semibold mb-2">المميزات:</h4>
              <ul class="list-disc list-inside space-y-1 text-gray-600">
                <template x-for="feature in (selectedProduct?.features || [])" :key="feature">
                  <li x-text="feature"></li>
                </template>
              </ul>
            </div>

            <!-- Age Range -->
            <div class="flex items-center gap-4 mb-6">
              <span class="text-sm font-medium">الفئة العمرية:</span>
              <span class="text-sm text-gray-600" x-text="selectedProduct?.ageRange"></span>
            </div>

            <!-- Brand -->
            <div class="flex items-center gap-4 mb-6">
              <span class="text-sm font-medium">العلامة التجارية:</span>
              <span class="text-sm text-gray-600" x-text="selectedProduct?.brand"></span>
            </div>

            <!-- Add to Cart -->
            <button @click="addToCart(selectedProduct); showQuickView = false" 
              class="w-full bg-orange-500 text-white py-3 px-6 rounded-lg hover:bg-orange-600 transition-colors font-medium">
              إضافة للسلة
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-8 px-4 md:px-10">
    <div class="container mx-auto">
      <!-- Footer Top Section -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
        <!-- About Shop -->
        <div>
          <h3 class="text-lg font-bold mb-4 border-r-4 border-orange-500 pr-3">عن MalakOutlet</h3>
          <p class="text-gray-300 text-sm md:text-base mb-4">
            متجر MalakOutlet هو وجهتك المثالية لجميع منتجات الألعاب والترفيه التعليمية للأطفال من مختلف الأعمار. نقدم
            مجموعة واسعة من الألعاب المميزة من أفضل العلامات التجارية العالمية.
          </p>
          <div class="flex space-x-4 space-x-reverse">
            <a href="#" class="text-white hover:text-orange-400">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path fill-rule="evenodd"
                  d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z"
                  clip-rule="evenodd"></path>
              </svg>
            </a>
            <a href="#" class="text-white hover:text-orange-400">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path fill-rule="evenodd"
                  d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"
                  clip-rule="evenodd"></path>
              </svg>
            </a>
            <a href="#" class="text-white hover:text-orange-400">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path
                  d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84">
                </path>
              </svg>
            </a>
          </div>
        </div>

        <!-- Quick Links -->
        <div>
          <h3 class="text-lg font-bold mb-4 border-r-4 border-orange-500 pr-3">روابط سريعة</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">عن الشركة</a></li>
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">سياسة الخصوصية</a></li>
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">الشروط والأحكام</a></li>
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">سياسة الاستبدال
                والاسترجاع</a></li>
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">الأسئلة الشائعة</a></li>
          </ul>
        </div>

        <!-- Categories -->
        <div>
          <h3 class="text-lg font-bold mb-4 border-r-4 border-orange-500 pr-3">الفئات</h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">ألعاب تعليمية</a></li>
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">ألعاب ليغو</a></li>
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">الدمى</a></li>
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">سيارات وعربات</a></li>
            <li><a href="#" class="text-gray-300 hover:text-orange-400 text-sm md:text-base">ألعاب إلكترونية</a></li>
          </ul>
        </div>

        <!-- Contact -->
        <div>
          <h3 class="text-lg font-bold mb-4 border-r-4 border-orange-500 pr-3">اتصل بنا</h3>
          <div class="space-y-3">
            <div class="flex items-start">
              <svg class="w-5 h-5 ml-3 mt-1 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
              </svg>
              <p class="text-gray-300 text-sm md:text-base">الأردن - عمان     <br /> شفابدران - دوار التطبيقية</p>  
            </div>
            <div class="flex items-center">
              <svg class="w-5 h-5 ml-3 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z">
                </path>
              </svg>
              <p class="text-gray-300 text-sm md:text-base" dir="ltr">+962 79 004 35 81</p>
            </div>
            <div class="flex items-center">
              <svg class="w-5 h-5 ml-3 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z">
                </path>
              </svg>
              <p class="text-gray-300 text-sm md:text-base">info@MalakOutlet.com</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Copyright -->
      <div class="border-t border-gray-700 pt-4 text-center text-gray-400 text-sm">
        <p>© 2025 MalakOutlet. جميع الحقوق محفوظة.</p>
      </div>
    </div>
  </footer>
  <script>
    function productsApp() {
      return {
        // State
        loading: true,
        mobileMenuOpen: false,
        showFilters: true,
        mobileFiltersOpen: false,
        showQuickView: false,
        selectedProduct: null,
        viewMode: 'grid',
        searchQuery: '',
        sortBy: 'newest',
        currentPage: 1,
        itemsPerPage: 12,

        // Cart and Favorites
        cartCount: 0,
        favoriteCount: 0,

        // Filter Options
        categories: ['ألعاب تعليمية', 'مكعبات البناء', 'ألعاب إلكترونية', 'ألعاب رياضية', 'ألعاب فنية', 'ألعاب اجتماعية'],
        ageRanges: ['0-2 سنة', '3-5 سنوات', '6-8 سنوات', '9-12 سنة', '13+ سنة'],
        brands: ['ليغو', 'ماتيل', 'هاسبرو', 'فيشر برايس', 'بلاي دو'],
        
        // Selected Filters
        selectedCategories: [],
        selectedAgeRanges: [],
        selectedBrands: [],
        selectedRatings: [],
        priceRange: { max: 100 },

        // Products Data
        allProducts: [],
        filteredProducts: [],
        paginatedProducts: [],
        totalPages: 1,

        // Initialize
        init() {
          this.loadProducts();
          setTimeout(() => {
            this.loading = false;
          }, 1500);
        },

        // Load Products
        loadProducts() {
          this.allProducts = [
            {
              id: 1,
              name: 'مكعبات البناء التعليمية',
              category: 'ألعاب تعليمية',
              price: 25,
              originalPrice: 35,
              image: 'https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=400',
              rating: 5,
              reviews: 24,
              isNew: true,
              discount: 29,
              isPopular: true,
              isFavorite: false,
              ageRange: '3-5 سنوات',
              brand: 'ليغو',
              description: 'مجموعة رائعة من مكعبات البناء التعليمية التي تساعد على تنمية الإبداع والمهارات الحركية للأطفال',
              features: ['آمنة تماماً للأطفال', 'مواد عالية الجودة', 'ألوان زاهية وجذابة', 'تنمي الإبداع والخيال']
            },
            {
              id: 2,
              name: 'لعبة الألغاز التفاعلية',
              category: 'ألعاب تعليمية',
              price: 18,
              originalPrice: null,
              image: 'https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=400',
              rating: 4,
              reviews: 18,
              isNew: false,
              discount: 0,
              isPopular: false,
              isFavorite: false,
              ageRange: '6-8 سنوات',
              brand: 'ماتيل',
              description: 'لعبة ألغاز تفاعلية تساعد على تطوير مهارات حل المشكلات والتفكير المنطقي',
              features: ['تحديات متدرجة الصعوبة', 'واجهة سهلة الاستخدام', 'مناسبة للعب الجماعي', 'تطور المهارات المعرفية']
            },
            {
              id: 3,
              name: 'مجموعة الرسم والتلوين',
              category: 'ألعاب فنية',
              price: 12,
              originalPrice: 18,
              image: 'https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=400',
              rating: 4,
              reviews: 32,
              isNew: false,
              discount: 33,
              isPopular: true,
              isFavorite: false,
              ageRange: '3-5 سنوات',
              brand: 'فيشر برايس',
              description: 'مجموعة كاملة من أدوات الرسم والتلوين لتنمية المواهب الفنية لدى الأطفال',
              features: ['أقلام ملونة عالية الجودة', 'ورق رسم متنوع', 'ألوان مائية آمنة', 'حقيبة تنظيم أنيقة']
            },
            {
              id: 4,
              name: 'كرة القدم الذكية',
              category: 'ألعاب رياضية',
              price: 30,
              originalPrice: null,
              image: 'https://images.unsplash.com/photo-1574623452334-1e0ac2b3ccb4?w=400',
              rating: 5,
              reviews: 15,
              isNew: true,
              discount: 0,
              isPopular: false,
              isFavorite: false,
              ageRange: '6-8 سنوات',
              brand: 'هاسبرو',
              description: 'كرة قدم ذكية مع مستشعرات لتتبع الأداء وتحسين المهارات الرياضية',
              features: ['تتبع السرعة والدقة', 'تطبيق ذكي مرافق', 'مقاومة للماء', 'بطارية طويلة المدى']
            },
            {
              id: 5,
              name: 'لعبة المطبخ الصغير',
              category: 'ألعاب اجتماعية',
              price: 45,
              originalPrice: 60,
              image: 'https://images.unsplash.com/photo-1558618047-3c8c76ca7d13?w=400',
              rating: 5,
              reviews: 28,
              isNew: false,
              discount: 25,
              isPopular: true,
              isFavorite: false,
              ageRange: '3-5 سنوات',
              brand: 'فيشر برايس',
              description: 'مطبخ صغير كامل مع جميع الأدوات والإكسسوارات لتعليم الأطفال مهارات الطبخ',
              features: ['أصوات وإضاءة واقعية', 'أدوات طبخ متنوعة', 'آمن ومتين', 'يشجع على اللعب التعاوني']
            },
            {
              id: 6,
              name: 'لعبة التركيب الإلكترونية',
              category: 'ألعاب إلكترونية',
              price: 55,
              originalPrice: null,
              image: 'https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=400',
              rating: 4,
              reviews: 22,
              isNew: true,
              discount: 0,
              isPopular: false,
              isFavorite: false,
              ageRange: '9-12 سنة',
              brand: 'ليغو',
              description: 'لعبة تركيب إلكترونية متقدمة تعلم الأطفال أساسيات البرمجة والروبوتيك',
              features: ['برمجة بصرية سهلة', 'مستشعرات متنوعة', 'واجهة تطبيق تفاعلية', 'مشاريع تعليمية متدرجة']
            },
            {
              id: 7,
              name: 'دمية تفاعلية ذكية',
              category: 'ألعاب اجتماعية',
              price: 38,
              originalPrice: 50,
              image: 'https://images.unsplash.com/photo-1520085601670-ee14aa5fa3e8?w=400',
              rating: 4,
              reviews: 19,
              isNew: false,
              discount: 24,
              isPopular: true,
              isFavorite: false,
              ageRange: '3-5 سنوات',
              brand: 'ماتيل',
              description: 'دمية ذكية تفاعلية تتكلم وتتفاعل مع الطفل لتعليمه مهارات اجتماعية مهمة',
              features: ['أكثر من 100 عبارة', 'استجابة للمس والصوت', 'تعلم اللغة والأرقام', 'تصميم محبوب وآمن']
            },
            {
              id: 8,
              name: 'مجموعة التجارب العلمية',
              category: 'ألعاب تعليمية',
              price: 32,
              originalPrice: null,
              image: 'https://images.unsplash.com/photo-1576086213369-97a306d36557?w=400',
              rating: 5,
              reviews: 10,
                isNew: true,
                discount: 0,
                isPopular: false,
                isFavorite: false,
                ageRange: '9-12 سنة',
                brand: 'هاسبرو',
                description: 'مجموعة تجارب علمية ممتعة تعلم الأطفال أساسيات العلوم بطريقة تفاعلية',
                features: ['تجارب متنوعة', 'مواد آمنة وصديقة للبيئة', 'دليل تعليمي شامل', 'تعزز الفضول العلمي']
            },];
        
          this.filterProducts();
        },

        // Filter Products
        filterProducts() {
          let filtered = this.allProducts;

          // Search
          if (this.searchQuery.trim() !== '') {
            const q = this.searchQuery.trim().toLowerCase();
            filtered = filtered.filter(p =>
              p.name.toLowerCase().includes(q) ||
              (p.description && p.description.toLowerCase().includes(q))
            );
          }

          // Categories
          if (this.selectedCategories.length > 0) {
            filtered = filtered.filter(p => this.selectedCategories.includes(p.category));
          }

          // Age Ranges
          if (this.selectedAgeRanges.length > 0) {
            filtered = filtered.filter(p => this.selectedAgeRanges.includes(p.ageRange));
          }

          // Brands
          if (this.selectedBrands.length > 0) {
            filtered = filtered.filter(p => this.selectedBrands.includes(p.brand));
          }

          // Ratings
          if (this.selectedRatings.length > 0) {
            filtered = filtered.filter(p => this.selectedRatings.some(r => p.rating >= r));
          }

          // Price Range
          filtered = filtered.filter(p => p.price <= this.priceRange.max);

          this.filteredProducts = filtered;
          this.currentPage = 1;
          this.updatePagination();
        },

        // Sort Products
        sortProducts() {
          let sorted = [...this.filteredProducts];
          switch (this.sortBy) {
            case 'price-low':
              sorted.sort((a, b) => a.price - b.price);
              break;
            case 'price-high':
              sorted.sort((a, b) => b.price - a.price);
              break;
            case 'name':
              sorted.sort((a, b) => a.name.localeCompare(b.name, 'ar'));
              break;
            case 'rating':
              sorted.sort((a, b) => b.rating - a.rating);
              break;
            case 'popular':
              sorted.sort((a, b) => (b.isPopular ? 1 : 0) - (a.isPopular ? 1 : 0));
              break;
            case 'newest':
            default:
              sorted.sort((a, b) => b.id - a.id);
          }
          this.filteredProducts = sorted;
          this.currentPage = 1;
          this.updatePagination();
        },

        // Update Pagination
        updatePagination() {
          this.totalPages = Math.max(1, Math.ceil(this.filteredProducts.length / this.itemsPerPage));
          this.paginatedProducts = this.filteredProducts.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);
        },

        // Change Page  
        changePage(page) {
          if (page < 1 || page > this.totalPages) return;
          this.currentPage = page;
          this.updatePagination();
        },

        // Reset Filters
        resetFilters() {
          this.selectedCategories = [];
          this.selectedAgeRanges = [];
          this.selectedBrands = [];
          this.selectedRatings = [];
          this.priceRange = { max: 100 };
          this.searchQuery = '';
          this.filterProducts();
        },

        // Toggle Favorite
        toggleFavorite(id) {
          const product = this.allProducts.find(p => p.id === id);
          if (product) {
            product.isFavorite = !product.isFavorite;
            this.favoriteCount = this.allProducts.filter(p => p.isFavorite).length;
          }
        },

        // Add to Cart
        addToCart(product) {
          this.cartCount++;
        },

        // Quick View
        quickView(product) {
          this.selectedProduct = product;
          this.showQuickView = true;
        },

        // Visible Pages for Pagination
        get visiblePages() {
          const pages = [];
          let start = Math.max(1, this.currentPage - 2);
          let end = Math.min(this.totalPages, start + 4);
          if (end - start < 4) start = Math.max(1, end - 4);
          for (let i = start; i <= end; i++) pages.push(i);
          return pages;
        }
      }
    }
</script>
</body>
</html>